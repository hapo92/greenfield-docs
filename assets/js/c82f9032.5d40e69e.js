"use strict";(self.webpackChunkgreenfield_docs=self.webpackChunkgreenfield_docs||[]).push([[5093],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>P});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(t),m=o,P=c["".concat(s,".").concat(m)]||c[m]||u[m]||i;return t?a.createElement(P,r(r({ref:n},d),{},{components:t})):a.createElement(P,r({ref:n},d))}));function P(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[c]="string"==typeof e?e:o,r[1]=l;for(var p=2;p<i;p++)r[p]=t[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},55145:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=t(87462),o=(t(67294),t(3905));const i={title:"SP Config"},r=void 0,l={unversionedId:"guide/storage-provider/run-book/config",id:"guide/storage-provider/run-book/config",title:"SP Config",description:"SP Config",source:"@site/docs/guide/storage-provider/run-book/config.md",sourceDirName:"guide/storage-provider/run-book",slug:"/guide/storage-provider/run-book/config",permalink:"/greenfield-docs/docs/guide/storage-provider/run-book/config",draft:!1,editUrl:"https://github.com/bnb-chain/greenfield-docs/blob/main/docs/guide/storage-provider/run-book/config.md",tags:[],version:"current",frontMatter:{title:"SP Config"},sidebar:"guideSidebar",previous:{title:"How to deploy Piece Store",permalink:"/greenfield-docs/docs/guide/storage-provider/run-book/piece-store"},next:{title:"SP Common Issues",permalink:"/greenfield-docs/docs/guide/storage-provider/run-book/common-issues"}},s={},p=[{value:"SP Config",id:"sp-config",level:2},{value:"App info",id:"app-info",level:3},{value:"Database",id:"database",level:3},{value:"PieceStore",id:"piecestore",level:3},{value:"Chain info",id:"chain-info",level:3},{value:"SpAccount",id:"spaccount",level:3},{value:"Endpoint",id:"endpoint",level:3},{value:"P2P",id:"p2p",level:3},{value:"Gateway",id:"gateway",level:3},{value:"BlockSyncer",id:"blocksyncer",level:3},{value:"FundingPrivateKey",id:"fundingprivatekey",level:3},{value:"Rcmgr",id:"rcmgr",level:3},{value:"SP Probe",id:"sp-probe",level:3},{value:"SP Mainnet Recommended Config",id:"sp-mainnet-recommended-config",level:2}],d={toc:p},c="wrapper";function u(e){let{components:n,...t}=e;return(0,o.kt)(c,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"sp-config"},"SP Config"),(0,o.kt)("p",null,"This section gives you a complete config of SP. ",(0,o.kt)("inlineCode",{parentName:"p"},"./gnfd-sp config.dump")," will generate a template config.toml."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},"# optional\nEnv = ''\n# optional\nAppID = ''\n# optional\nServer = []\n# optional\nGRPCAddress = ''\n\n[SpDB]\n# required\nUser = ''\n# required\nPasswd = ''\n# required\nAddress = ''\n# required\nDatabase = ''\n# optional\nConnMaxLifetime = 0\n# optional\nConnMaxIdleTime = 0\n# optional\nMaxIdleConns = 0\n# optional\nMaxOpenConns = 0\n# optional\nEnableTracePutEvent = false\n\n[BsDB]\n# required\nUser = ''\n# required\nPasswd = ''\n# required\nAddress = ''\n# required\nDatabase = ''\n# optional\nConnMaxLifetime = 0\n# optional\nConnMaxIdleTime = 0\n# optional\nMaxIdleConns = 0\n# optional\nMaxOpenConns = 0\n# optional\nEnableTracePutEvent = false\n\n[PieceStore]\n# required\nShards = 0\n\n[PieceStore.Store]\n# required\nStorage = ''\n# optional\nBucketURL = ''\n# optional\nMaxRetries = 0\n# optional\nMinRetryDelay = 0\n# optional\nTLSInsecureSkipVerify = false\n# required\nIAMType = ''\n\n[Chain]\n# required\nChainID = ''\n# required\nChainAddress = []\n# optional\nSealGasLimit = 0\n# optional\nSealFeeAmount = 0\n# optional\nRejectSealGasLimit = 0\n# optional\nRejectSealFeeAmount = 0\n# optional\nDiscontinueBucketGasLimit = 0\n# optional\nDiscontinueBucketFeeAmount = 0\n# optional\nCreateGlobalVirtualGroupGasLimit = 0\n# optional\nCreateGlobalVirtualGroupFeeAmount = 0\n# optional\nCompleteMigrateBucketGasLimit = 0\n# optional\nCompleteMigrateBucketFeeAmount = 0\n\n[SpAccount]\n# required\nSpOperatorAddress = ''\n# required\nOperatorPrivateKey = ''\n# optional\nFundingPrivateKey = ''\n# required\nSealPrivateKey = ''\n# required\nApprovalPrivateKey = ''\n# required\nGcPrivateKey = ''\n# required\nBlsPrivateKey = ''\n\n[Endpoint]\n# required\nApproverEndpoint = ''\n# required\nManagerEndpoint = ''\n# required\nDownloaderEndpoint = ''\n# required\nReceiverEndpoint = ''\n# required\nMetadataEndpoint = ''\n# required\nUploaderEndpoint = ''\n# required\nP2PEndpoint = ''\n# required\nSignerEndpoint = ''\n# required\nAuthenticatorEndpoint = ''\n\n[Approval]\n# optional\nBucketApprovalTimeoutHeight = 0\n# optional\nObjectApprovalTimeoutHeight = 0\n# optional\nReplicatePieceTimeoutHeight = 0\n\n[Bucket]\n# optional\nAccountBucketNumber = 0\n# optional\nMaxListReadQuotaNumber = 0\n# optional\nMaxPayloadSize = 0\n\n[Gateway]\n# required\nDomainName = ''\n# required\nHTTPAddress = ''\n\n[Executor]\n# optional\nMaxExecuteNumber = 0\n# optional\nAskTaskInterval = 0\n# optional\nAskReplicateApprovalTimeout = 0\n# optional\nAskReplicateApprovalExFactor = 0.0\n# optional\nListenSealTimeoutHeight = 0\n# optional\nListenSealRetryTimeout = 0\n# optional\nMaxListenSealRetry = 0\n# optional\nMaxObjectMigrationRetry = 0\n# optional\nObjectMigrationRetryTimeout = 0\n# optional\nEnableSkipFailedToMigrateObject = false\n# optional\nBucketTrafficKeepTimeDay = 0\n# optional\nReadRecordKeepTimeDay = 0\n# optional\nReadRecordDeleteLimit = 0\n\n[P2P]\n# optional\nP2PPrivateKey = ''\n# optional\nP2PAddress = ''\n# optional\nP2PAntAddress = ''\n# optional\nP2PBootstrap = []\n# optional\nP2PPingPeriod = 0\n\n[Parallel]\n# optional\nGlobalCreateBucketApprovalParallel = 0\n# optional\nGlobalCreateObjectApprovalParallel = 0\n# optional\nGlobalMaxUploadingParallel = 0\n# optional\nGlobalUploadObjectParallel = 0\n# optional\nGlobalReplicatePieceParallel = 0\n# optional\nGlobalSealObjectParallel = 0\n# optional\nGlobalReceiveObjectParallel = 0\n# optional\nGlobalRecoveryPieceParallel = 0\n# optional\nGlobalMigrateGVGParallel = 0\n# optional\nGlobalBackupTaskParallel = 0\n# optional\nGlobalDownloadObjectTaskCacheSize = 0\n# optional\nGlobalChallengePieceTaskCacheSize = 0\n# optional\nGlobalSyncConsensusInfoInterval = 0\n# optional\nGlobalGCObjectParallel = 0\n# optional\nGlobalGCBucketMigrationParallel = 0\n# optional\nGlobalGCZombieParallel = 0\n# optional\nGlobalGCMetaParallel = 0\n# optional\nUploadObjectParallelPerNode = 0\n# optional\nReceivePieceParallelPerNode = 0\n# optional\nDownloadObjectParallelPerNode = 0\n# optional\nChallengePieceParallelPerNode = 0\n# optional\nAskReplicateApprovalParallelPerNode = 0\n# optional\nQuerySPParallelPerNode = 0\n# required\nDiscontinueBucketEnabled = false\n# optional\nDiscontinueBucketTimeInterval = 0\n# required\nDiscontinueBucketKeepAliveDays = 0\n# optional\nLoadReplicateTimeout = 0\n# optional\nLoadSealTimeout = 0\n\n[Task]\n# optional\nUploadTaskSpeed = 0\n# optional\nDownloadTaskSpeed = 0\n# optional\nReplicateTaskSpeed = 0\n# optional\nReceiveTaskSpeed = 0\n# optional\nSealObjectTaskTimeout = 0\n# optional\nSealObjectTaskRetry = 0\n# optional\nReplicateTaskRetry = 0\n# optional\nReceiveConfirmTaskRetry = 0\n# optional\nGcObjectTaskTimeout = 0\n# optional\nGcZombieTaskTimeout = 0\n# optional\nGcMetaTaskTimeout = 0\n# optional\nGcObjectTaskRetry = 0\n# optional\nGcZombieTaskRetry = 0\n# optional\nGcMetaTaskRetry = 0\n\n[Monitor]\n# required\nDisableMetrics = false\n# required\nDisablePProf = false\n# required\nDisableProbe = false\n# required\nMetricsHTTPAddress = ''\n# required\nPProfHTTPAddress = ''\n# required\nProbeHTTPAddress = ''\n\n# optional\n[Rcmgr]\n# optional\nDisableRcmgr = false\n\n[Log]\n# optional\nLevel = ''\n# optional\nPath = ''\n\n[BlockSyncer]\n# required\nModules = []\n# required\nWorkers = 0\n# optional\nBsDBWriteAddress = ''\n\n[APIRateLimiter]\n# optional\nPathPattern = []\n# optional\nHostPattern = []\n# optional\nAPILimits = []\n# optional\nNameToLimit = []\n\n[APIRateLimiter.IPLimitCfg]\n# optional\nOn = false\n# optional\nRateLimit = 0\n# optional\nRatePeriod = ''\n\n[Manager]\n# optional\nEnableLoadTask = false\n# optional\nEnableHealthyChecker = false\n# optional\nSubscribeSPExitEventIntervalMillisecond = 0\n# optional\nSubscribeSwapOutExitEventIntervalMillisecond = 0\n# optional\nSubscribeBucketMigrateEventIntervalMillisecond = 0\n# optional\nGVGPreferSPList = []\n# optional\nSPBlackList = []\n# optional\nEnableTaskRetryScheduler = false\n# optional\nRejectUnsealThresholdSecond = 0\n\n[GC]\n# optional\nGCObjectTimeInterval = 0\n# optional\nGCObjectBlockInterval = 0\n# optional\nGCObjectSafeBlockDistance = 0\n# optional\nEnableGCZombie = false\n# optional\nGCZombieSafeObjectIDDistance = 0\n# optional\nGCZombiePieceTimeInterval = 0\n# optional\nGCZombiePieceObjectIDInterval = 0\n# optional\nEnableGCMeta = false\n# optional\nGCMetaTimeInterval = 0\n")),(0,o.kt)("h3",{id:"app-info"},"App info"),(0,o.kt)("p",null,"These fields are optional."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"# optional\nEnv = ''\n# optional\nAppID = ''\n# optional\nServer = []\n# optional\nGRPCAddress = ''\n")),(0,o.kt)("h3",{id:"database"},"Database"),(0,o.kt)("p",null,"To config ",(0,o.kt)("inlineCode",{parentName:"p"},"[SpDB]"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"[BsDB]"),", you have to input the ",(0,o.kt)("inlineCode",{parentName:"p"},"user name"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"db password"),",",(0,o.kt)("inlineCode",{parentName:"p"},"db address"),"  and  ",(0,o.kt)("inlineCode",{parentName:"p"},"db name")," in these fields."),(0,o.kt)("h3",{id:"piecestore"},"PieceStore"),(0,o.kt)("p",null,"To config ",(0,o.kt)("inlineCode",{parentName:"p"},"[PieceStore]")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"[PieceStore.Store]"),", you can read the details in this ",(0,o.kt)("a",{parentName:"p",href:"/greenfield-docs/docs/guide/storage-provider/run-book/piece-store"},"doc")),(0,o.kt)("h3",{id:"chain-info"},"Chain info"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ChainID")," of mainnet is ",(0,o.kt)("inlineCode",{parentName:"li"},"greenfield_1017-1")," and testnet is ",(0,o.kt)("inlineCode",{parentName:"li"},"greenfield_5600-1"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ChainAddress")," is RPC endpoint of mainnet, you can find RPC info ",(0,o.kt)("a",{parentName:"li",href:"/greenfield-docs/docs/api/endpoints"},"here"))),(0,o.kt)("h3",{id:"spaccount"},"SpAccount"),(0,o.kt)("p",null,"These private keys are generated during wallet setup."),(0,o.kt)("h3",{id:"endpoint"},"Endpoint"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"[Endpoint]")," specified the URL of different services."),(0,o.kt)("p",null,"For single-machine host (not recommended):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},"[Endpoint]\nApproverEndpoint = ''\nManagerEndpoint = ''\nDownloaderEndpoint = ''\nReceiverEndpoint = ''\nMetadataEndpoint = ''\nUploaderEndpoint = ''\nP2PEndpoint = ''\nSignerEndpoint = ''\nAuthenticatorEndpoint = ''\n")),(0,o.kt)("p",null,"For K8S cluster:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},"[Endpoint]\nApproverEndpoint = 'manager:9333'\nManagerEndpoint = 'manager:9333'\nDownloaderEndpoint = 'downloader:9333'\nReceiverEndpoint = 'receiver:9333'\nMetadataEndpoint = 'metadata:9333'\nUploaderEndpoint = 'uploader:9333'\nP2PEndpoint = 'p2p:9333'\nSignerEndpoint = 'signer:9333'\nAuthenticatorEndpoint = 'localhost:9333'\n")),(0,o.kt)("h3",{id:"p2p"},"P2P"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"We don't use P2P service in mainnet and testnet, so users can ignore P2P items.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"P2PPrivateKey")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"node_id")," is generated by ",(0,o.kt)("inlineCode",{parentName:"li"},"./gnfd-sp p2p.create.key -n 1")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"P2PAntAddress")," is your load balance address. If you don't have a load balance address, you should have a public IP and use it in ",(0,o.kt)("inlineCode",{parentName:"li"},"P2PAddress"),". It consists of ",(0,o.kt)("inlineCode",{parentName:"li"},"ip:port"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"P2PBootstrap")," can be left empty.")),(0,o.kt)("h3",{id:"gateway"},"Gateway"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},"[Gateway]\nDomainName = 'region.sp-name.com'\n")),(0,o.kt)("p",null,"The correct configuration should not include the protocol prefix ",(0,o.kt)("inlineCode",{parentName:"p"},"https://"),"."),(0,o.kt)("h3",{id:"blocksyncer"},"BlockSyncer"),(0,o.kt)("p",null,"Here is block_syncer config. The configuration of BsDBWriteAddress can be the same as the BSDB.Address module here. To enhance performance, you can set up the write database address here and the corresponding read database address in BSDB."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},"Modules = ['epoch','bucket','object','payment','group','permission','storage_provider','prefix_tree', 'virtual_group','sp_exit_events','object_id_map','general']\nWorkers = 50\nBsDBWriteAddress = 'localhost:3306'\n")),(0,o.kt)("h3",{id:"fundingprivatekey"},"FundingPrivateKey"),(0,o.kt)("p",null,"There is no need to write ",(0,o.kt)("inlineCode",{parentName:"p"},"FundingPrivateKey")," in config.toml. It should be kept in cold wallet for safety."),(0,o.kt)("h3",{id:"rcmgr"},"Rcmgr"),(0,o.kt)("p",null,"ResourceManager manages resources within SP system, tracking and accounting for usage across the stack, from internal components to applications. It also allows for resource usage to be limited based on user-configurable policies. Config schema shows as below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-proto"},"message GfSpLimit {\n  int64 memory = 1;\n  int32 tasks = 2;\n  int32 tasks_high_priority = 3;\n  int32 tasks_medium_priority = 4;\n  int32 tasks_low_priority = 5;\n  int32 fd = 6;\n  int32 conns = 7;\n  int32 conns_inbound = 8;\n  int32 conns_outbound = 9;\n}\n\nmessage GfSpLimiter {\n  GfSpLimit system = 1;\n  GfSpLimit transient = 2;\n  map<string, GfSpLimit> service_limit = 3;\n}\n")),(0,o.kt)("h3",{id:"sp-probe"},"SP Probe"),(0,o.kt)("p",null,"It contains two probes: liveness and readiness probe. If users want to check SP whether is healthy and ready. Users can refer ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/"},"Kubernetes docs")," to learn related concepts. About detailed SP probe info, users can refer ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/bnb-chain/greenfield-storage-provider/blob/master/core/prober/prober.go"},"SP probe"),"."),(0,o.kt)("h2",{id:"sp-mainnet-recommended-config"},"SP Mainnet Recommended Config"),(0,o.kt)("p",null,"This section shows the config of official in Greenfield, so users can add use similar config:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'# optional\nEnv = "mainnet"\n# optional\nServer = []\n# optional\nGRPCAddress = \'0.0.0.0:9333\'\n\n[SpDB]\n# required\nUser = \'\'\n# required\nPasswd = \'\'\n# required\nAddress = \'{your_db_address}\'\n# required\nDatabase = \'storage_provider_db\'\n\n[BsDB]\n# required\nUser = \'\'\n# required\nPasswd = \'\'\n# required\nAddress = \'{your_db_address}\'\n# required\nDatabase = \'block_syncer\'\n\n[PieceStore]\n# required\nShards = 0\n\n[PieceStore.Store]\n# required\nStorage = \'s3\'\n# optional\nBucketURL = \'{your_bucker_url}\'\n# optional\nMaxRetries = 5\n# optional\nMinRetryDelay = 0\n# optional\nTLSInsecureSkipVerify = false\n# required\nIAMType = \'SA\'\n\n[Chain]\n# required\nChainID = \'greenfield_1017-1\'\n# required\nChainAddress = [\'{your_fullnode_address}\']\n\n[SpAccount]\n# required\nSpOperatorAddress = \'{your_operator_address}\'\n# required\n# OperatorPrivateKey = \'\'\n# required\n# SealPrivateKey = \'\'\n# required\n# ApprovalPrivateKey = \'\'\n# required\n# GcPrivateKey = \'\'\n\n[Endpoint]\n# required\nApproverEndpoint = \'approver:9333\'\n# required\nManagerEndpoint = \'manager:9333\'\n# required\nDownloaderEndpoint = \'downloader:9333\'\n# required\nReceiverEndpoint = \'receiver:9333\'\n# required\nMetadataEndpoint = \'metadata:9333\'\n# required\nUploaderEndpoint = \'uploader:9333\'\n# required\nP2PEndpoint = \'p2p-service:9333\'\n# required\nSignerEndpoint = \'signer:9333\'\n# required\nAuthenticatorEndpoint = \'localhost:9333\'\n\n[Gateway]\n# required\nDomainName = \'{your_domain_name}\'\n# required\nHTTPAddress = \'0.0.0.0:9033\'\n\n[P2P]\n# optional\n#P2PPrivateKey = \'\'\n# optional\nP2PAddress = \'0.0.0.0:9933\'\n# optional\nP2PAntAddress = \'\'\n# optional\nP2PBootstrap = []\n# optional\n# P2PPingPeriod = 0\n\n[Parallel]\n# optional\nDiscontinueBucketEnabled = false\n# optional\nDiscontinueBucketKeepAliveDays = 365\n# optional\nGlobalMaxUploadingParallel = 3072\n# optional\nUploadObjectParallelPerNode = 100\n# optional\nReceivePieceParallelPerNode = 1024\n# optional\nDownloadObjectParallelPerNode = 200\n# optional\nChallengePieceParallelPerNode = 200\n# optional\nAskReplicateApprovalParallelPerNode = 10240\n# optional\nGlobalCreateBucketApprovalParallel = 1024\n# optional\nGlobalCreateObjectApprovalParallel = 1024\n# optional\nGlobalUploadObjectParallel = 1024\n# optional\nGlobalReplicatePieceParallel = 1024\n# optional\nGlobalSealObjectParallel = 1024\n# optional\nGlobalReceiveObjectParallel = 10240\n# optional\nGlobalBackupTaskParallel = 1024\n# optional\nGlobalRecoveryPieceParallel = 1024\n# optional\nGlobalGcObjectSafeBlockDistance = 64\n# optional\nGlobalMigrateGVGParallel = 10\n\n[Monitor]\n# required\nDisableMetrics = false\n# required\nDisablePProf = false\n# required\nDisableProbe = false\n# required\nMetricsHTTPAddress = \'0.0.0.0:24367\'\n# required\nPProfHTTPAddress = \'0.0.0.0:24368\'\n# required\nProbeHTTPAddress = \'0.0.0.0:24369\'\n\n# optional\n[Rcmgr]\n# optional\nDisableRcmgr = false\n# optional\n[Rcmgr.GfSpLimiter]\n# optional\n[Rcmgr.GfSpLimiter.System]\n# optional\nMemory = 4294967296\n# optional\nTasks = 10240\n# optional\nTasksHighPriority = 128\n# optional\nTasksMediumPriority = 1024\n# optional\nTasksLowPriority = 16\n# optional\nFd = 2147483647\n# optional\nConns = 2147483647\n# optional\nConnsInbound = 2147483647\n# optional\nConnsOutbound = 2147483647\n\n[BlockSyncer]\n# required\nModules = [\'epoch\',\'bucket\',\'object\',\'payment\',\'group\',\'permission\',\'storage_provider\',\'prefix_tree\',\'virtual_group\',\'sp_exit_events\',\'object_id_map\',\'general\']\n# required\nWorkers = 50\n# optional\nBsDBWriteAddress = "{your_db_address}"\n\n[APIRateLimiter]\n# every line should represent one entry of gateway route. The comment after each line must contain which route name it represents.\n# Most of APIs has a qps number, offered by QA team.  That usually means the max qps for the whole 4 gateway cluster.\n# How to setup the RateLimit value, it is a sophistcated question and need take a lot of factors into account.\n# 1. For most query-APIs, we can setup a rate limit up to the 1/4 of max qps, as the config is for only one gateway instance.\n# 2. Also we avoid to setup a too large or too small rate limit value.\n# 3. For upload/download APIs, it is diffiult to use a rate limit as a protect mechanism for the servers. Because the performance of upload/download interactions usually dependens on how large the file is processed.\n# 4. We tetatively setup 50~75 as the rate limit for the download/upload APIs and we can ajdust them once we have a better experience.\n# 5. Currently, please only put one name inside the name list of PathPatttern\n\n# optional\nPathPattern = [\n    {Key = "/auth/request_nonce", Method = "GET", Names = ["GetRequestNonce"]},\n    {Key = "/auth/update_key", Method = "POST", Names = ["UpdateUserPublicKey"]},\n    {Key = "/permission/.+/[^/]*/.+", Method = "GET", Names = ["VerifyPermission"]},\n    {Key = "/greenfield/admin/v1/get-approval", Method = "GET", Names = ["GetApproval"]},\n    {Key = "/greenfield/admin/v1/challenge", Method = "GET", Names = ["GetChallengeInfo"]},\n    {Key = "/greenfield/admin/v2/challenge", Method = "GET", Names = ["GetChallengeInfo"]},\n    {Key = "/greenfield/receiver/v1/replicate-piece", Method = "PUT", Names = ["ReplicateObjectPiece"]},\n    {Key = "/greenfield/recovery/v1/get-piece", Method = "GET", Names = ["RecoveryPiece"]},\n    {Key = "/greenfield/migrate/v1/notify-migrate-swap-out-task", Method = "POST", Names = ["NotifyMigrateSwapOut"]},\n    {Key = "/greenfield/migrate/v1/migrate-piece", Method = "GET", Names = ["MigratePiece"]},\n    {Key = "/greenfield/migrate/v1/migration-bucket-approval", Method = "GET", Names = ["MigrationBucketApproval"]},\n    {Key = "/greenfield/migrate/v1/get-swap-out-approval", Method = "GET", Names = ["SwapOutApproval"]},\n    {Key = "/download/[^/]*/.+", Method = "GET", Names = ["DownloadObjectByUniversalEndpoint"]},{Key = "/download", Method = "GET", Names = ["DownloadObjectByUniversalEndpoint"]},\n    {Key = "/view/[^/]*/.+", Method = "GET", Names = ["ViewObjectByUniversalEndpoint"]},{Key = "/view", Method = "GET", Names = ["ViewObjectByUniversalEndpoint"]},\n    {Key = "/status", Method = "GET", Names = ["GetStatus"]},\n    {Key = "/.+/.+[?]offset.*", Method = "POST", Names = ["ResumablePutObject"]},\n    {Key = "/.+/.+[?]upload-context.*", Method = "GET", Names = ["QueryResumeOffset"]},\n    {Key = "/.+/.+[?]upload-progress.*", Method = "GET", Names = ["QueryUploadProgress"]},\n    {Key = "/.+/.+[?]bucket-meta.*", Method = "GET", Names = ["GetBucketMeta"]},\n    {Key = "/.+/.+[?]object-meta.*", Method = "GET", Names = ["GetObjectMeta"]},\n    {Key = "/.+/.+[?]object-policies.*", Method = "GET", Names = ["ListObjectPolicies"]},\n    {Key = "/.+[?]read-quota.*", Method = "GET", Names = ["GetBucketReadQuota"]},\n    {Key = "/.+[?]list-read-quota.*", Method = "GET", Names = ["ListBucketReadRecord"]},\n    {Key = "/[?].*group-query.*", Method = "GET", Names = ["GetGroupList"]},\n    {Key = "/[?].*objects-query.*", Method = "GET", Names = ["ListObjectsByIDs"]},\n    {Key = "/[?].*buckets-query.*", Method = "GET", Names = ["ListBucketsByIDs"]},\n    {Key = "/[?].*verify-id.*", Method = "GET", Names = ["VerifyPermissionByID"]},\n    {Key = "/[?].*user-groups.*", Method = "GET", Names = ["GetUserGroups"]},\n    {Key = "/[?].*group-members.*", Method = "GET", Names = ["GetGroupMembers"]},\n    {Key = "/[?].*owned-groups.*", Method = "GET", Names = ["GetUserOwnedGroups"]},\n\n    {Key = "/.+/$", Method = "GET", Names = ["ListObjectsByBucket"]},\n    {Key = "/.+/.+", Method = "GET", Names = ["GetObject"]},\n    {Key = "/.+/.+", Method = "PUT", Names = ["PutObject"]},\n    {Key = "/$", Method = "GET", Names = ["GetUserBuckets"]},\n\n]\n\nNameToLimit = [\n    {Name = "GetRequestNonce", RateLimit = 100, RatePeriod = \'S\'}, # requestNonceRouterName 3000qps\n    {Name = "UpdateUserPublicKey", RateLimit = 100, RatePeriod = \'S\'}, # updateUserPublicKeyRouterName 4000qps\n    {Name = "VerifyPermission", RateLimit = 100, RatePeriod = \'S\'}, # verifyPermissionRouterName  1200qps\n    {Name = "GetApproval", RateLimit = 35, RatePeriod = \'S\'}, # approvalRouterName  150qps\n    {Name = "GetChallengeInfo", RateLimit = 20, RatePeriod = \'S\'}, # getChallengeInfoRouterName, no test data\n    {Name = "ReplicateObjectPiece", RateLimit = 1000, RatePeriod = \'S\'},  # replicateObjectPieceRouterName, no test data. Internal API among sps, no rate limit is needed.\n    {Name = "RecoveryPiece", RateLimit = 1000, RatePeriod = \'S\'}, # recoveryPieceRouterName, no test data. Internal API among sps, no rate limit is needed.\n    {Name = "NotifyMigrateSwapOut", RateLimit = 10, RatePeriod = \'S\'},  # notifyMigrateSwapOutRouterName, no test data. Internal API among sps, no rate limit is needed.\n    {Name = "MigratePiece", RateLimit = 10, RatePeriod = \'S\'}, # migratePieceRouterName, no test data\n    {Name = "MigrationBucketApproval", RateLimit = 10, RatePeriod = \'S\'}, # migrationBucketApprovalName, no test data\n    {Name = "SwapOutApproval", RateLimit = 10, RatePeriod = \'S\'}, # swapOutApprovalName, no test data\n    {Name = "DownloadObjectByUniversalEndpoint", RateLimit = 50, RatePeriod = \'S\'}, # downloadObjectByUniversalEndpointName, 50qps\n    {Name = "ViewObjectByUniversalEndpoint", RateLimit = 50, RatePeriod = \'S\'}, # viewObjectByUniversalEndpointName, 50qps\n    {Name = "GetStatus", RateLimit = 200, RatePeriod = \'S\'},# getStatusRouterName, 2000qps\n    {Name = "ResumablePutObject", RateLimit = 30, RatePeriod = \'S\'}, # resumablePutObjectRouterName , test data is same as putObject object 10qps\n    {Name = "QueryResumeOffset", RateLimit = 30, RatePeriod = \'S\'},  # queryResumeOffsetName, test data is same as putObject object 10qps\n    {Name = "QueryUploadProgress", RateLimit = 50, RatePeriod = \'S\'}, # queryUploadProgressRouterName, test data is same as putObject object 10qps\n    {Name = "GetBucketMeta", RateLimit = 100, RatePeriod = \'S\'}, # getBucketMetaRouterName, 400qps\n    {Name = "GetObjectMeta", RateLimit = 100, RatePeriod = \'S\'}, # getObjectMetaRouterName, 400qps\n    {Name = "ListObjectPolicies", RateLimit = 200, RatePeriod = \'S\'}, # listObjectPoliciesRouterName, 2000qps\n    {Name = "GetBucketReadQuota", RateLimit = 200, RatePeriod = \'S\'}, # getBucketReadQuotaRouterName\n    {Name = "ListBucketReadRecord", RateLimit = 100, RatePeriod = \'S\'}, # listBucketReadRecordRouterName\n    {Name = "GetGroupList", RateLimit = 200, RatePeriod = \'S\'}, # getGroupListRouterName\uff0c similar to getUserGroupsRouterName, 2000qps\n    {Name = "ListObjectsByIDs", RateLimit = 200, RatePeriod = \'S\'}, # listObjectsByIDsRouterName, 1200qps\n    {Name = "ListBucketsByIDs", RateLimit = 200, RatePeriod = \'S\'}, # listBucketsByIDsRouterName, 2000qps\n    {Name = "VerifyPermissionByID", RateLimit = 200, RatePeriod = \'S\'}, # verifyPermissionByIDRouterName, 1200qps\n    {Name = "GetUserGroups", RateLimit = 200, RatePeriod = \'S\'}, # getUserGroupsRouterName, 2000qps\n    {Name = "GetGroupMembers", RateLimit = 200, RatePeriod = \'S\'}, # getGroupMembersRouterName, 2000qps\n    {Name = "GetUserOwnedGroups", RateLimit = 200, RatePeriod = \'S\'}, # getUserOwnedGroupsRouterName, 2000qps\n\n    {Name = "ListObjectsByBucket", RateLimit = 75, RatePeriod = \'S\'}, # listObjectsByBucketRouterName, 300qps\n    {Name = "GetObject", RateLimit = 75, RatePeriod = \'S\'}, # getObjectRouterName, 100 qps\n    {Name = "PutObject", RateLimit = 75, RatePeriod = \'S\'}, # putObjectRouterName, 100 qps\n    {Name = "GetUserBuckets", RateLimit = 75, RatePeriod = \'S\'}] # getUserBucketsRouterName, 1000 qps\n\nHostPattern = []\n\n[Manager]\n# optional\nEnableLoadTask = true\n# optional\nGVGPreferSPList = [1,2,3,4,5,6,7]\n# optional\nEnableTaskRetryScheduler = true\n\n[Executor]\n# optional\nListenSealRetryTimeout = 30\n')))}u.isMDXComponent=!0}}]);